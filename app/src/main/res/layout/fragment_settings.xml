<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/backgroundPrimary"
    android:fillViewport="true">

<androidx.constraintlayout.widget.ConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="24dp"
    tools:context=".fragments.SettingsFragment">

    <!-- Header Section -->
    <TextView
        android:id="@+id/settingsTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Settings"
        style="@style/ModernText.Heading"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="32dp"/>

    <TextView
        android:id="@+id/settingsSubtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Configure your ZenLock preferences"
        style="@style/ModernText.Caption"
        app:layout_constraintTop_toBottomOf="@id/settingsTitle"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="8dp"/>

    <!-- Feedback & Support Section -->
    <LinearLayout
        android:id="@+id/feedbackSupportSection"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginTop="24dp"
        app:layout_constraintTop_toBottomOf="@id/settingsSubtitle">

        <!-- Send Feedback Card -->
        <LinearLayout
            android:id="@+id/feedbackCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="12dp"
            android:background="@drawable/feedback_card_gradient"
            android:elevation="6dp"
            android:orientation="horizontal"
            android:padding="20dp"
            android:gravity="center_vertical">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="ðŸ’¬"
                    android:textSize="24sp"
                    android:layout_marginEnd="16dp"/>

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Send Feedback"
                        android:textColor="@color/white"
                        android:textSize="18sp"
                        android:textStyle="bold"/>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Help us improve ZenLock with your suggestions"
                        android:textColor="@color/white"
                        android:textSize="14sp"
                        android:alpha="0.9"
                        android:layout_marginTop="4dp"/>

                </LinearLayout>

                <ImageView
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@android:drawable/ic_menu_send"
                    app:tint="@color/white"
                    android:layout_marginStart="12dp"/>

        </LinearLayout>

        <!-- Support Developer Card -->
        <LinearLayout
            android:id="@+id/supportDeveloperCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/support_card_gradient"
            android:elevation="6dp"
            android:orientation="horizontal"
            android:padding="20dp"
            android:gravity="center_vertical">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="â˜•"
                    android:textSize="24sp"
                    android:layout_marginEnd="16dp"/>

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Support the Developer"
                        android:textColor="@color/white"
                        android:textSize="18sp"
                        android:textStyle="bold"/>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Did this app help you? Show your support â¤ï¸"
                        android:textColor="@color/white"
                        android:textSize="14sp"
                        android:alpha="0.9"
                        android:layout_marginTop="4dp"/>

                </LinearLayout>

                <ImageView
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@android:drawable/ic_menu_share"
                    app:tint="@color/white"
                    android:layout_marginStart="12dp"/>

        </LinearLayout>

    </LinearLayout>

    <!-- App Management Card -->
    <androidx.cardview.widget.CardView
        android:id="@+id/appManagementCard"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="24dp"
        android:layout_marginBottom="4dp"
        app:cardBackgroundColor="@color/surface"
        app:cardCornerRadius="16dp"
        app:cardElevation="12dp"
        app:layout_constraintTop_toBottomOf="@id/feedbackSupportSection">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- App Management Header -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="App Management"
                style="@style/ModernText.Subheading"
                android:layout_gravity="center"
                android:layout_marginBottom="20dp"/>

            <!-- Whitelist Section -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Allowed Apps"
                    style="@style/ModernText.Body"
                    android:textColor="@color/textPrimary"
                    android:layout_marginBottom="8dp"/>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Select apps that can be used during focus sessions (Max: 4)"
                    style="@style/ModernText.Caption"
                    android:textColor="@color/textSecondary"
                    android:layout_marginBottom="16dp"/>

                <Button
                    android:id="@+id/whitelistButton"
                    android:layout_width="match_parent"
                    android:layout_height="56dp"
                    android:text="Manage Apps"
                    style="@style/ModernButton.Primary"
                    android:textSize="14sp"
                    android:textColor="@color/white"
                    android:drawableStart="@drawable/ic_apps"
                    android:drawablePadding="8dp"
                    android:gravity="center"
                    android:paddingHorizontal="16dp"
                    android:paddingVertical="12dp"/>

            </LinearLayout>

        </LinearLayout>

    </androidx.cardview.widget.CardView>

    <!-- Lock Protection Card (Expandable) -->
    <androidx.cardview.widget.CardView
        android:id="@+id/lockProtectionCard"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="4dp"
        app:cardBackgroundColor="@color/surface"
        app:cardCornerRadius="16dp"
        app:cardElevation="12dp"
        app:layout_constraintTop_toBottomOf="@id/appManagementCard">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- Header with Expand Button -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:clickable="true"
                android:focusable="true"
                android:background="?android:attr/selectableItemBackground"
                android:id="@+id/lockProtectionHeader"
                android:padding="8dp">

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Lock Protection"
                        style="@style/ModernText.Subheading"
                        android:textColor="@color/textPrimary"/>

                    <TextView
                        android:id="@+id/lockProtectionSummary"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Enhanced Security"
                        style="@style/ModernText.Caption"
                        android:textColor="@color/textSecondary"
                        android:layout_marginTop="4dp"/>

                </LinearLayout>

                <ImageView
                    android:id="@+id/lockProtectionExpandIcon"
                    android:layout_width="24dp"
                    android:layout_height="24dp"
                    android:src="@drawable/ic_expand_more"
                    android:rotation="0"
                    android:contentDescription="Expand"/>

            </LinearLayout>

            <!-- Expandable Content -->
            <LinearLayout
                android:id="@+id/lockProtectionContent"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="gone"
                android:layout_marginTop="16dp">

                <!-- Security Level -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginBottom="20dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Security Level"
                        style="@style/ModernText.Body"
                        android:textColor="@color/textPrimary"
                        android:layout_marginBottom="8dp"/>

                    <RadioGroup
                        android:id="@+id/securityLevelGroup"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical">

                        <RadioButton
                            android:id="@+id/basicSecurity"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="Basic (Standard lock screen)"
                            android:textColor="@color/textPrimary"
                            android:padding="8dp"/>

                        <RadioButton
                            android:id="@+id/enhancedSecurity"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="Enhanced (Foreground service + auto-restart)"
                            android:textColor="@color/textPrimary"
                            android:padding="8dp"/>

                        <RadioButton
                            android:id="@+id/maximumSecurity"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:text="Maximum (All mechanisms + persistent notification)"
                            android:textColor="@color/textPrimary"
                            android:padding="8dp"/>

                    </RadioGroup>

                </LinearLayout>

                <!-- Lock Settings -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                    <!-- Notification Toggle -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:paddingVertical="12dp">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                style="@style/ModernText.Body"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Lock Notifications"
                                android:textColor="@color/textPrimary" />

                            <TextView
                                style="@style/ModernText.Caption"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Show persistent notification when lock is active"
                                android:textColor="@color/textSecondary" />

                        </LinearLayout>

                        <androidx.appcompat.widget.SwitchCompat
                            android:id="@+id/persistentNotificationToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:theme="@style/AppTheme.Switch" />

                    </LinearLayout>

                    <!-- Auto-Restart Toggle -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:paddingVertical="12dp">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                style="@style/ModernText.Body"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Auto-Restart Protection"
                                android:textColor="@color/textPrimary" />

                            <TextView
                                style="@style/ModernText.Caption"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Automatically restart lock if app is killed"
                                android:textColor="@color/textSecondary" />

                        </LinearLayout>

                        <androidx.appcompat.widget.SwitchCompat
                            android:id="@+id/autoRestartToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:theme="@style/AppTheme.Switch" />

                    </LinearLayout>

                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

    </androidx.cardview.widget.CardView>

        <!-- General Settings Card -->
    <androidx.cardview.widget.CardView
        android:id="@+id/generalSettingsCard"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="4dp"
        app:cardBackgroundColor="@color/surface"
        app:cardCornerRadius="16dp"
        app:cardElevation="12dp"
        app:layout_constraintTop_toBottomOf="@id/lockProtectionCard">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- General Settings Header -->
            <TextView
                style="@style/ModernText.Subheading"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="20dp"
                android:text="General Settings" />

            <!-- Mode Toggles -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <!-- Motivational Quotes Toggle -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:paddingVertical="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            style="@style/ModernText.Body"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Motivational Quotes"
                            android:textColor="@color/textPrimary" />

                        <TextView
                            style="@style/ModernText.Caption"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="2dp"
                            android:text="Show inspiring quotes on lock screen"
                            android:textColor="@color/textSecondary" />

                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/quotesToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.Switch" />

                </LinearLayout>

                <!-- Timer Type Toggle -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:paddingVertical="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            style="@style/ModernText.Body"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Focus Session Timer"
                            android:textColor="@color/textPrimary" />

                        <TextView
                            style="@style/ModernText.Caption"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="2dp"
                            android:text="Display remaining focus time as circular progress ring"
                            android:textColor="@color/textSecondary" />

                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/circularTimerToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.Switch" />

                </LinearLayout>

                <!-- Vibration Feedback Toggle -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:paddingVertical="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            style="@style/ModernText.Body"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Vibration Feedback"
                            android:textColor="@color/textPrimary" />

                        <TextView
                            style="@style/ModernText.Caption"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="2dp"
                            android:text="Vibrate on unlock and important actions"
                            android:textColor="@color/textSecondary" />

                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/vibrationToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.Switch" />

                </LinearLayout>

                <!-- Default Apps Configuration -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:paddingVertical="12dp">

                    <!-- Header with expand/collapse -->
                    <LinearLayout
                        android:id="@+id/defaultAppsHeader"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal"
                        android:background="?android:attr/selectableItemBackground"
                        android:clickable="true"
                        android:focusable="true"
                        android:paddingVertical="8dp">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                style="@style/ModernText.Body"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Default Apps Settings"
                                android:textColor="@color/textPrimary" />

                            <TextView
                                style="@style/ModernText.Caption"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Configure which essential apps stay accessible"
                                android:textColor="@color/textSecondary" />

                        </LinearLayout>

                        <ImageView
                            android:id="@+id/defaultAppsExpandIcon"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:src="@drawable/ic_expand_more"
                            app:tint="@color/textSecondary"
                            android:contentDescription="Expand default apps settings" />

                    </LinearLayout>

                    <!-- Expandable content -->
                    <LinearLayout
                        android:id="@+id/defaultAppsExpandableContent"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:paddingStart="16dp"
                        android:paddingTop="8dp"
                        android:visibility="gone">

                        <!-- Phone/Call App Toggle -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal"
                            android:paddingVertical="8dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_call"
                                app:tint="@color/textSecondary"
                                android:layout_marginEnd="12dp"
                                android:contentDescription="Phone app" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    style="@style/ModernText.Body"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Phone/Call App"
                                    android:textColor="@color/textPrimary" />

                                <TextView
                                    style="@style/ModernText.Caption"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="For emergency calls"
                                    android:textColor="@color/textSecondary" />

                            </LinearLayout>

                            <androidx.appcompat.widget.SwitchCompat
                                android:id="@+id/phoneAppToggle"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:checked="true"
                                android:theme="@style/AppTheme.Switch" />

                        </LinearLayout>

                        <!-- Calendar App Toggle -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal"
                            android:paddingVertical="8dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_timer"
                                app:tint="@color/textSecondary"
                                android:layout_marginEnd="12dp"
                                android:contentDescription="Calendar app" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    style="@style/ModernText.Body"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Calendar App"
                                    android:textColor="@color/textPrimary" />

                                <TextView
                                    android:id="@+id/calendarAppDescription"
                                    style="@style/ModernText.Caption"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="For checking schedules and events"
                                    android:textColor="@color/textSecondary" />

                            </LinearLayout>

                            <androidx.appcompat.widget.SwitchCompat
                                android:id="@+id/calendarAppToggle"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:checked="true"
                                android:theme="@style/AppTheme.Switch" />

                        </LinearLayout>

                        <!-- Clock App Toggle -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal"
                            android:paddingVertical="8dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_access_time"
                                app:tint="@color/textSecondary"
                                android:layout_marginEnd="12dp"
                                android:contentDescription="Clock app" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    style="@style/ModernText.Body"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Clock/Timer App"
                                    android:textColor="@color/textPrimary" />

                                <TextView
                                    style="@style/ModernText.Caption"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="For alarms and timers"
                                    android:textColor="@color/textSecondary" />

                            </LinearLayout>

                            <androidx.appcompat.widget.SwitchCompat
                                android:id="@+id/clockAppToggle"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:checked="true"
                                android:theme="@style/AppTheme.Switch" />

                        </LinearLayout>

                    </LinearLayout>

                </LinearLayout>


            </LinearLayout>

        </LinearLayout>

    </androidx.cardview.widget.CardView>

    <!-- Unlock Methods Card -->
    <androidx.cardview.widget.CardView
        android:id="@+id/unlockMethodsCard"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="20dp"
        app:cardBackgroundColor="@color/surface"
        app:cardCornerRadius="16dp"
        app:cardElevation="12dp"
        app:layout_constraintTop_toBottomOf="@id/generalSettingsCard">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="24dp">

            <!-- Unlock Methods Header -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Unlock Methods"
                style="@style/ModernText.Subheading"
                android:layout_gravity="center"
                android:layout_marginBottom="20dp"/>

            <!-- PIN Section with Toggle -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:layout_marginBottom="24dp">

                <!-- PIN Toggle Header -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:paddingVertical="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="PIN Unlock"
                            style="@style/ModernText.Body"
                            android:textColor="@color/textPrimary"/>

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Set a 4-digit PIN to unlock focus sessions"
                            style="@style/ModernText.Caption"
                            android:textColor="@color/textSecondary"
                            android:layout_marginTop="2dp"/>

                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/pinUnlockToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.Switch"/>

                </LinearLayout>

                <!-- PIN Configuration Section (Expandable) -->
                <LinearLayout
                    android:id="@+id/pinConfigSection"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:gravity="center_vertical"
                    android:visibility="gone"
                    android:layout_marginTop="8dp"
                    android:paddingHorizontal="8dp">

                    <Button
                        android:id="@+id/configurePinButton"
                        android:layout_width="0dp"
                        android:layout_height="48dp"
                        android:layout_weight="1"
                        android:text="Set PIN"
                        style="@style/ModernButton.Primary"
                        android:textSize="14sp"
                        android:textColor="@color/white"
                        android:layout_marginEnd="8dp"
                        android:paddingVertical="8dp"/>

                    <Button
                        android:id="@+id/clearPinButton"
                        android:layout_width="0dp"
                        android:layout_height="48dp"
                        android:layout_weight="1"
                        android:text="Clear PIN"
                        style="@style/ModernButton.Secondary"
                        android:textSize="14sp"
                        android:textColor="@color/white"
                        android:visibility="gone"
                        android:paddingVertical="8dp"/>

                </LinearLayout>

            </LinearLayout>

            <!-- Accountability Partner Section with Toggle -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <!-- Partner Toggle Header -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:paddingVertical="12dp">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Accountability Partner"
                            style="@style/ModernText.Body"
                            android:textColor="@color/textPrimary"/>

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Get OTP from trusted contact to unlock"
                            style="@style/ModernText.Caption"
                            android:textColor="@color/textSecondary"
                            android:layout_marginTop="2dp"/>

                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/partnerUnlockToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:theme="@style/AppTheme.Switch"/>

                </LinearLayout>

                <!-- Partner Configuration Section (Expandable) -->
                <LinearLayout
                    android:id="@+id/partnerConfigSection"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:visibility="gone"
                    android:layout_marginTop="8dp"
                    android:paddingHorizontal="8dp">

                    <Button
                        android:id="@+id/accountabilityPartnerButton"
                        android:layout_width="match_parent"
                        android:layout_height="48dp"
                        android:text="Configure Contact"
                        style="@style/ModernButton.Secondary"
                        android:textSize="14sp"
                        android:textColor="@color/white"
                        android:drawableStart="@drawable/ic_person"
                        android:drawablePadding="8dp"
                        android:gravity="center"
                        android:paddingVertical="8dp"/>

                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

    </androidx.cardview.widget.CardView>

    <!-- Warning Message for No Unlock Methods -->
    <LinearLayout
        android:id="@+id/noUnlockMethodsWarning"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:layout_marginHorizontal="16dp"
        android:background="@drawable/warning_background"
        android:padding="16dp"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:visibility="gone"
        app:layout_constraintTop_toBottomOf="@id/unlockMethodsCard">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="âš ï¸"
            android:textSize="18sp"
            android:layout_marginEnd="12dp"/>

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="No unlock methods configured! You may get locked out during focus sessions. Please enable at least one unlock method."
            android:textColor="@color/warningText"
            android:textSize="14sp"
            android:lineSpacingMultiplier="1.2"/>

    </LinearLayout>

</androidx.constraintlayout.widget.ConstraintLayout>
</ScrollView>
